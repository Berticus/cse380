\begin{center}
    \begin{tikzpicture}[node distance=1.5cm, auto]
        \node[cloud] (origin) {Start};
        \node[decision, below of=origin] (timer) {Was the interrupt caused by the timer?};
        \node[block, below of=timer, node distance=3cm] (clear) {Clear interrupt};
        \node[block, below of=clear] (fixed) {Clear terminal and output prompt and top of box};
        \node[block, below of=fixed] (get) {Get position and direction};
        \node[block, below of=get] (updatep) {Update position and change direction if necessary};
        \node[block, below of=updatep] (updatet) {Update terminal output};
        \node[block, below of=updatet] (save) {Save positition and direction};
        \node[block, below of=save] (reset) {Reset TCR and re-enable clock};
        \node[decision, below of=reset] (uart) {Was the interrupt caused by UART?};
        \node[block, below of=uart, node distance=3cm] (input) {Read input};
        \node[block, below of=input] (set) {Adjust speed and direction based on input};
        \node[cloud, below of=set] (stop) {Stop};
        \path[line] (origin) -- (timer);
        \path[line] (timer) -- node [near start] {yes} (clear);
        \path[line] (clear) -- (fixed);
        \path[line] (fixed) -- (get);
        \path[line] (get) -- (updatep);
        \path[line] (updatep) -- (updatet);
        \path[line] (updatet) -- (save);
        \path[line] (save) -- (reset);
        \path[line] (reset) -- (uart);
        \path[line] (uart) -- node [near start] {yes} (input);
        \path[line] (input) -- (set);
        \path[line] (set) -- (stop);
        \path[line] (timer) -| node [near start] {no} +(6,-21) -- (stop);
        \draw (uart) -- node [near start] {no} +(6,0);
    \end{tikzpicture}
\end{center}
